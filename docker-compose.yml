services:
  server:
    build:
      context: .
      dockerfile: Dockerfile.server
    ports:
      - "5555:5555"
    volumes:
      # Persist dashboard configuration and secrets
      - ./dashboard-data:/app/dashboard-data
    environment:
      - NODE_ENV=production
      - PORT=5555
      # For production, set a master key for secrets encryption:
      # - SECRETS_MASTER_KEY=your-64-char-hex-key-here
    restart: unless-stopped

  client:
    build:
      context: .
      dockerfile: Dockerfile.client
    ports:
      - "5556:80"
    depends_on:
      - server
    restart: unless-stopped
